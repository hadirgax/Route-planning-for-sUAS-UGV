---
title: Reproduction of JINT publication
output: 
    html_document
execute:
    cache: false
---
# Init
```{python, include=F, echo=F}
import pandas as pd
import matplotlib.pyplot  as plt
import K_means_clustering_2cluster_3clustdist_bounds_one as Km
import UGV_route_2cluster_3clustdist_bounds_one as UGV
points = pd.read_excel("3veh_2clusters_3clustdist_datapts/3veh_2clusters_1bd_2.xlsx")
```

# Data presentation
```{python}
points.describe()
```
```{python}
#|fig.cap: "Plot of the data given by the authors"
points.plot.scatter("x","y")
```

Seems valid with the data presented in `3veh_2clusters_3clustdist_plots.pdf`, but only checked visually

# Making K-means points

I have to modify the `clustered_locations` in the `K_means_clustering_2cluster_3clustdist_bounds_one.py` to open the data given in the previous file.
I remove also the plotting function from the general function to allow just the computing of the centroids

```{python}
_locations = points[["x","y"]].values
ctrd, _locations, labels = Km.clustered_locations(_locations=_locations)
```

Now I plot the centroids through the defined function of the authors
```{python}
Km.plot_centroids(points, ctrd, labels)
```

# Computing the UGV route
I modify the `main` to avoid regenerating the data and using the given data by the authors.

```{python}
import importlib
importlib.reload(UGV_route_2cluster_3clustdist_bounds_one)
routes, solution, routing, manager = UGV.main(_locations=_locations)
```

The `route_location` is the same as the centroids of the K-means
I did not find any script to do the plotting of the solution of the UGV route.

```{python}
x_route = [ctrd[i][0] for i in routes]
y_route = [ctrd[i][1] for i in routes]
Km.plot_centroids(points, ctrd, labels)
plt.title("Solution for the UGV, {} with distance {}".format(routes, solution.ObjectiveValue()))
plt.plot(x_route, y_route)
plt.show()
```

The figure is not very clear but the UGV starts on the red point

